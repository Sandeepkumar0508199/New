Update#3

Complete Step-by-Step ADF Activity Setup
Step 1: Create Until Activity

Drag "Until" activity from Activities panel
Name: Until_Shared_Writer_Is_Free
Go to "Settings" tab
Expression: @equals(int(variables('activeRuns')), 0)
Timeout: 7.00:00:00

Step 2: Create Pipeline Variable

Click empty pipeline canvas
Go to "Variables" tab at bottom
Click "+ New"
Name: activeRuns
Type: String
Default value: 1

Step 3: Add WebActivity Inside Until

Drag "Web" activity into the Until box
Name: Ask_ADF_who_Is_Writing
Settings tab:

URL: https://management.azure.com/subscriptions/4b643f6a-df52-44bd-8b8e-b20ea31e75a8/resourceGroups/rg-ccams-qa-use2/providers/Microsoft.DataFactory/factories/adf-ccams-qa-use2-01/queryPipelineRuns?api-version=2018-06-01
Method: POST
Body:

{
 "lastUpdatedAfter": "@{adddays(utcnow(),-2)}",
 "lastUpdatedBefore": "@{utcnow()}",
 "filters": [{
  "operand": "PipelineName",
  "operator": "Equals",
  "values": ["Common Write to DB Pipeline"]
 }]
}

Headers: Click "+ New"

Name: Content-Type
Value: application/json


Authentication: Service Principal

Resource: https://management.azure.com
Tenant: c7f6413d-1e73-45d2-b0da-a68713b515a7
Service principal ID: 0cb0296f-4e6c-4470-81de-8d24aae51284
Service principal key: Azure Key Vault

Linked service: ls_ccams_kv
Secret name: secret







Step 4: Add Filter Activity Inside Until

Drag "Filter" activity into the Until box
Name: Filter_To_Find_Busy_Writers
Connect: Ask_ADF_who_Is_Writing → Filter_To_Find_Busy_Writers
Settings tab:

Items: @activity('Ask_ADF_who_Is_Writing').output.value
Condition: @or(equals(item().status, 'InProgress'), equals(item().status, 'Queued'))



Step 5: Add Set Variable Activity Inside Until

Drag "Set Variable" activity into the Until box
Name: Update_Active_Runs_Count
Connect: Filter_To_Find_Busy_Writers → Update_Active_Runs_Count
Settings tab:

Variable name: Select activeRuns from dropdown
Value: @string(activity('Filter_To_Find_Busy_Writers').output.FilteredItemsCount)



Step 6: Add If Condition Activity Inside Until

Drag "If Condition" activity into the Until box
Name: If_Writer_Still_Busy
Connect: Update_Active_Runs_Count → If_Writer_Still_Busy
Settings tab:

Expression: @greater(int(variables('activeRuns')), 0)



Step 7: Add Wait Activity in If TRUE Branch

Click "Add activity" in TRUE branch of If Condition
Drag "Wait" activity
Name: Wait_For_A_Minute
Settings tab:

Wait time in seconds: 60



Step 8: Add Execute Pipeline Activity Outside Until

Drag "Execute Pipeline" activity outside the Until box
Name: Execute_Common_Write_DB_Pipeline
Connect: Until_Shared_Writer_Is_Free → Execute_Common_Write_DB_Pipeline
Settings tab:

Invoked pipeline: Select Common Write to DB Pipeline
Wait on completion: ✅ Checked


Parameters tab:

Parameter 1:

Name: PatternAlertsJson
Type: String
Default value: Leave empty or add test JSON

Parameter 2:

Name: PatternSurveillanceRunId
Type: String
Default value: Leave empty

Parameter 3:

Name: PatternDatasetRunId
Type: String
Default value: Leave empty

Parameter 4:

Name: PatternAlertType
Type: String
Default value: Leave empty

Step 2: After Creating Parameters

Go back to your Execute Pipeline activity
Click "Parameters" tab
You should now see 4 input fields matching your target pipeline parameters
Fill them with expressions:

alertsJsonInput: @pipeline().parameters.PatternAlertsJson
surveillanceRunIDInput: @pipeline().parameters.PatternSurveillanceRunId
datasetRunIdInput: @pipeline().parameters.PatternDatasetRunId
alertTypeInput: @pipeline().parameters.PatternAlertType



Step 9: Add Pipeline Parameters

Click empty pipeline canvas
Go to "Parameters" tab
Add these 4 parameters:

PatternAlertsJson (string)
PatternSurveillanceRunId (string)
PatternDatasetRunId (string)
PatternAlertType (string)



Step 10: Validate and Test

Click "Validate"
Fix any errors
Click "Debug"
Provide test parameters:

{
  "PatternAlertsJson": "[{\"SMBCAIDPrefix\": \"TEST\"}]",
  "PatternSurveillanceRunId": "test-123",
  "PatternDatasetRunId": "test-456",
  "PatternAlertType": "Test Alert"
}



------------------------------------------------
Updated#2 
Yes, absolutely! You want to put the WebActivity inside an Until loop to keep checking until the pipeline is free. Here's exactly how to do it:
Until Loop Configuration:
Step 1: Create Until Activity

Add Until activity to your pipeline
Name it: Until_Shared_Writer_Is_Free

Step 2: Configure Until Condition
Expression: @equals(int(variables('activeRuns')), 0)
Meaning: Keep looping until activeRuns = 0 (no busy pipelines)
Step 3: Move Activities Inside Until Loop
Drag these activities inside the Until activity:

Ask_ADF_who_Is_Writing (WebActivity)
Filter_To_Find_Busy_Writers
Update_Active_Runs_Count
If_Writer_Still_Busy (with Wait activity in TRUE branch)

Step 4: Activities Outside Until Loop
After Until completes, add:

Send_To_Shared_Writing (Execute Pipeline)

-----------------------------------------
updated #1

{
 "lastUpdatedAfter": "@{adddays(utcnow(),-2)}",
 "lastUpdatedBefore": "@{utcnow()}",
 "filters": [{
  "operand": "PipelineName",
  "operator": "Equals",
  "values": ["Common Write to DB Pipeline"]
 }]
}

----------------

{
    "name": "Ask_ADF_who_Is_Writing",
    "type": "WebActivity",
    "dependsOn": [],
    "policy": {
        "timeout": "0.12:00:00",
        "retry": 0,
        "retryIntervalInSeconds": 30,
        "secureOutput": false,
        "secureInput": false
    },
    "userProperties": [],
    "typeProperties": {
        "method": "POST",
        "url": {
            "value": "@concat('https://management.azure.com/subscriptions/', pipeline().globalParameters.SubscriptionID, '/resourceGroups/', pipeline().globalParameters.ccamsResourceGroup, '/providers/Microsoft.DataFactory/factories/', pipeline().globalParameters.DatafactoryName, '/queryPipelineRuns?api-version=2018-06-01')",
            "type": "Expression"
        },
        "body": {
            "value": "{\n \"lastUpdatedAfter\": \"@{adddays(utcnow(),-2)}\",\n \"lastUpdatedBefore\": \"@{utcnow()}\",\n \"filters\": [{\n \"operand\": \"PipelineName\",\n \"operator\": \"Equals\",\n \"values\": [\"Common_Write_to_DB_Pipeline\"]\n }]\n}",
            "type": "Expression"
        },
        "headers": {
            "Content-Type": "application/json"
        },
        "authentication": {
            "type": "ServicePrincipal",
            "userTenant": {
                "value": "@pipeline().globalParameters.TenantID",
                "type": "Expression"
            },
            "username": {
                "value": "@pipeline().globalParameters.ServicePrincipalID",
                "type": "Expression"
            },
            "resource": {
                "value": "https://management.azure.com",
                "type": "Expression"
            },
            "password": {
                "type": "AzureKeyVaultSecret",
                "store": {
                    "referenceName": "ls_ccams_kv",
                    "type": "LinkedServiceReference",
                    "parameters": {
                        "keyvault_uri": {
                            "value": "@pipeline().globalParameters.ccamsKeyVault",
                            "type": "Expression"
                        }
                    }
                },
                "secretName": "secret"
            }
        }
    }
}
